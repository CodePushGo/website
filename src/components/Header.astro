---
import * as m from '@/paraglide/messages'
import { getRelativeLocaleUrl } from 'astro:i18n'

const brand = Astro.locals.runtimeConfig.public.brand
---

<header class="relative py-2">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <div class="relative flex items-center justify-between">
      <div class="shrink-0">
        <a href={getRelativeLocaleUrl(Astro.locals.locale)} title="codepushgo home" aria-label="codepushgo home" class="font-prompt flex items-center pr-3 text-4xl font-medium">
          <img class="h-18 w-auto pr-1" loading="eager" height="72" width="133" alt={`${brand} logo`} title={`${brand} logo`} src="/capgo_logo.webp" />
        </a>
      </div>
      <div class="flex lg:hidden">
        <button type="button" class="text-white" title="Expand menu" id="menu-toggle">
          <svg class="h-7 w-7" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
        </button>
      </div>
      <div class="hidden lg:flex lg:items-center lg:justify-center lg:space-x-10">
        <a
          href={getRelativeLocaleUrl(Astro.locals.locale, 'tutorials')}
          class="border-b-2 border-transparent text-base font-medium transition-all duration-200 hover:border-blue-600 focus:border-blue-600"
        >
          Tutorials
        </a>
        <a
          href={getRelativeLocaleUrl(Astro.locals.locale, 'blog')}
          class="border-b-2 border-transparent text-base font-medium transition-all duration-200 hover:border-blue-600 focus:border-blue-600"
        >
          {m.blog({}, { locale: Astro.locals.locale })}
        </a>
      </div>
    </div>
  </div>
  <div id="mobile-menu" class="hidden">
    <div class="bg-codepushgo-700 mt-2 space-y-1 px-2 pt-2 pb-3">
      <a
        href={getRelativeLocaleUrl(Astro.locals.locale, 'tutorials')}
        class="hover:bg-codepushgo-700 block rounded-md px-3 py-2 text-base font-medium text-gray-500 hover:text-white"
      >
        Tutorials
      </a>
      <a href={getRelativeLocaleUrl(Astro.locals.locale, 'blog')} class="hover:bg-codepushgo-700 block rounded-md px-3 py-2 text-base font-medium text-gray-500 hover:text-white">
        Blog
      </a>
    </div>
  </div>
</header>

<script>
  const menuToggle = document.getElementById('menu-toggle')
  const mobileMenu = document.getElementById('mobile-menu')

  menuToggle?.addEventListener('click', () => {
    mobileMenu?.classList.toggle('hidden')
  })
</script>
